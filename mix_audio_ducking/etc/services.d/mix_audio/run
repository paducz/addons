#!/command/with-contenv bash
set -e

# Přednastavené proměnné s fallbacky
AUDIO_DIR="${AUDIO_DIR:-/share/audio}"
PORT="${PORT:-8080}"
AUTH_TOKEN="${AUTH_TOKEN:-}"
ELEVEN_KEY="${ELEVEN_KEY:-}"

# Vytvoření výstupního adresáře (pokud neexistuje)
mkdir -p "$AUDIO_DIR"

# Spuštění hlavního python skriptu
exec python3 /mix.py \
    --audio-dir "$AUDIO_DIR" \
    --port "$PORT" \
    --auth "$AUTH_TOKEN" \
    --eleven-key "$ELEVEN_KEY"
